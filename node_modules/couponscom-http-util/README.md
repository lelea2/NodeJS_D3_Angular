# Package Description
This package contains utility functions for working with an express-conpatible HTTP request object.

# API
## 1.x
### initialize()

arguments: none

returns a function that takes an express-compatible request object, an express-compatible response object, and a callback function as parameters. The function copies all query string keys into the request object with lower casing. When called, the function creates a global object called CURRENTREQUEST to which is assigned the request object that's passed to it.

### getCurrentRoute()
arguments: (required) an express-compatible request object

return (string) current route configuration

### getCurrentURI()

arguments: (required) an express-compatible request object

returns (string) the original URL requested (starting with the path) for either the globally set request or the one that was passed to the function. This is a wrapper around express' request.originalUrl property.

### getCurrentHost()

arguments: (required) an express-compatible request object

returns (string) the hostname from the Host header field for either the globally set request or the one that was passed to the function. This is a wrapper around express' request.hostname property.

### getCurrentPath()

arguments: (required) an express-compatible request object

returns (string) the path of the URL for either the globally set request or the one that was passed. This is a wrapper around express' request.path property.

### getCurrentProtocol()

arguments: (required) an express-compatible request object

return (string) prototcol of the request object (http or https)

### getQueryString()
argument: (required) an express-compatible request object

return (string) whole query string in URL.
Eg: http://coupons.com/?plid=test&crid=media should return "plid=test&crid=media"

### getReferrerURL()

arguments: (optional object) an express-compatible request object

returns (string) the referrer from the headers if there was one or an empty string if there wasn't a referrer

### getQueryValue()

arguments:

- (string) the query string key (case insensitive) whose value you want to fetch
- (required) an express-compatible request object

returns (string)  the value of the key requested or an empty string if not present (note that the value could also be an empty string so this is not a test to determine if a query string key is present)

### getClientIP()

-- variables will be searched in order given, and first one with an IP will be used.
    "IPWARE_HTTP_HEADER_PRECEDENCE_ORDER": [
        "HTTP_CLIENT_IP",
        "REMOTE_ADDR"
    ]

arguments: (required) an express-compatible request object

return (string) the value of clientIP

### setReqBodyData()

arguments: (required) an express-compatible request object

set up new variable in pageContextData (a modified field in req.body) for pageContext reading purpose


### getReqBodyData()

arguments:
- (required) key (string) of the variable in pageContextData
- (required) an express-compatible request object

return (string/object) the value key from pageContextData

### updateQueryStringParameter()

arguments:

- url (string) the URL to be manipulated
- key (string) the key in the query string to update or add
- value (string) the value to assign to the key that is being updated or added
- returns (string)  the manipulated URL with the key updated if it existed or added if it did not exist

### isMobile()
argument an express-compatible request object

return (boolean) true if in mobile/tablet device, false if request comes from desktop device

### isTrustedIP()
argument an express-compatible request object

return (boolean) true if current request comes from trusted IP (inside the firewall), false otherwise

### isPrivateIP()
argument an express-compatible request object

return (boolean) true if current request comes from private IP, false otherwise

### HTTPStatus
A static Array contains all HTTP status Code definition


## 2.x
(Future)

# Examples
```javascript
// components/get-my-param/get-my-param.js
'use strict';
var httpUtil = require('couponscom-http-util/httpUtil');

module.exports = (function () {
    function getMyParam(myParam) {
        return httpUtil.getQueryValue(myParam);
    }
    return {
        getMyParam: getMyParam
    };
}());
```

# Jenkins Jobs

[Release](http://jenkins.corp.coupons.com/view/N2/view/Release/job/n2-http-util-release/)
- [coverage](http://jenkins.corp.coupons.com/view/N2/view/Release/job/n2-http-util-release-coverage/)
- [jslint](http://jenkins.corp.coupons.com/view/N2/view/Release/job/n2-http-util-release-lint-js/)
- [unit tests](http://jenkins.corp.coupons.com/view/N2/view/Release/job/n2-http-util-release-unittests/)

[Integration](http://jenkins.corp.coupons.com/view/N2/view/Release/job/n2-http-util-integration/)
- [coverage](http://jenkins.corp.coupons.com/view/N2/view/Release/job/n2-http-util-integration-coverage/)
- [jslint](http://jenkins.corp.coupons.com/view/N2/view/Release/job/n2-http-util-integration-lint-js/)
- [unit tests](http://jenkins.corp.coupons.com/view/N2/view/Release/job/n2-http-util-integration-unittests/)
